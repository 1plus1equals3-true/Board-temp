<%@page import="javax.servlet.jsp.tagext.TryCatchFinally"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ include file="op_top.jsp" %>
<%
String idx = request.getParameter("idx");
String passinput = request.getParameter("passinput");

String sql = "";
Connection conn = null;
Statement st = null;
ResultSet rs = null;
String check = "";

if (login_id == null || login_id.equals("")) {
	try {////////////////////////////////////////////////////////////////////
		conn = DB.getConnection();
		sql = "SELECT * FROM member WHERE boardtype='"+login_id+"'";
		st = conn.createStatement();
		rs = st.executeQuery(sql);
		rs.next();
		check = rs.getString("upassword");
	}catch (Exception e) {
		e.printStackTrace();
	    out.println(sql);
	}finally {
		if (rs != null){
			   rs.close();
			}

			if (ps != null){
				   ps.close();
			}

			if (st != null){
			   st.close();
			}

			if (conn != null){
			   conn.close();
			}
	}
}else {
	try {
		conn = DB.getConnection();
		sql = "SELECT * FROM member WHERE boardtype='"+login_id+"'";
		st = conn.createStatement();
		rs = st.executeQuery(sql);
		rs.next();
		check = rs.getString("upassword");
	}catch (Exception e) {
		e.printStackTrace();
	    out.println(sql);
	}finally {
		if (rs != null){
			   rs.close();
			}

			if (ps != null){
				   ps.close();
			}

			if (st != null){
			   st.close();
			}

			if (conn != null){
			   conn.close();
			}
	}


if (passinput.equals(check)) {
	%>
	<script type="text/javascript">
		location.replace("modify.jsp?idx=<%= idx %>");
	</script>
	<%
}else {
	%>
	<script type="text/javascript">
		alert("비밀번호가 틀렸습니다.");
		location.replace("view.jsp?idx=<%= idx %>");
	</script>
	<%
}

%>