<%@page import="java.util.Enumeration"%>
<%@page import="com.oreilly.servlet.multipart.DefaultFileRenamePolicy"%>
<%@page import="com.oreilly.servlet.MultipartRequest"%>
<%@ page import="java.sql.*"%>    
<%@ page import="lib.DB"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
   pageEncoding="UTF-8"%>   
<%
request.setCharacterEncoding("utf-8");


try{

      ResultSet rs = null;

        String loginid = request.getParameter("loginid");
        String loginpass = request.getParameter("loginpass");

        String sql = "";

          Connection conn=null;


             conn = DB.getConnection();
            //out.println("연결 성공");
            
           //쿼리문 작성
           sql = " select count(*) as cnt from  member where uid='"+loginid+"' and upassword='"+loginpass+"' ";
           
           //System.out.println(">>>>>"+sql);
           
           //Connection객체로부터 Statement객체를 얻어내는 코드
           Statement st = conn.createStatement();
           
           //쿼리문을 DB에 실행하는 코드
           rs = st.executeQuery(sql);
           rs.next();
           
           int cnt = rs.getInt("cnt");
           
           if(cnt > 0)
           {
              /*
              //쿠키
        	  Cookie cookie = new Cookie("login_check",  loginid);
              cookie.setMaxAge(60*60);
              response.addCookie(cookie);
              */
              //세션
              session.setAttribute("ss_check", loginid);
%>
<script>
alert("로그인 성공");
location.replace("List.jsp");
</script>
<%
           }
           else
           {
%>
<script>
alert("일치하는 아이디 비번이 없습니다.");
history.back();
</script>
<%       
           } 
        
    }catch(Exception e){
        e.printStackTrace();
    }
%>