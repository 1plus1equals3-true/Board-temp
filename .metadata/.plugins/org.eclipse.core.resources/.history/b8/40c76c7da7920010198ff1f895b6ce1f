<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="java.util.Date" %>
<%@ page import="java.text.SimpleDateFormat" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>회원가입</title>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<style>
/* 전역 스타일 */
*{
	margin: 0 auto;
	padding: 0;
	text-align: center;
	box-sizing: border-box;
}

body {
    background: linear-gradient(to right, #ACB6E5, #74ebd5);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

/* 제목 스타일 */
h2 {
    color: #333;
    margin-top: 20px;
    margin-bottom: 20px;
}

/* 폼 컨테이너 */
form {
    background-color: #fff;
    padding: 30px;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    width: 90%;
    max-width: 600px;
    margin: 20px auto;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

/* 테이블 스타일 (게시판 테이블과 유사하게) */
table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
}

table td {
    padding: 12px 15px;
    text-align: left;
}

/* 입력 필드, 선택 박스 스타일 (검색 폼과 유사하게) */
input[type="text"],
input[type="password"],
input[type="file"],
select {
    padding: 8px 12px;
    border: 1px solid #ced4da;
    border-radius: 4px;
    font-size: 14px;
    color: #495057;
    width: 100%;
    box-sizing: border-box;
}

/* 라디오 버튼, 체크박스 스타일 */
input[type="radio"],
input[type="checkbox"] {
    width: auto;
    margin-right: 5px;
}

/* 버튼 스타일 (게시판 글쓰기, 검색 버튼과 유사하게) */
input[type="submit"],
input[type="reset"],
button {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    background-color: #4CAF50;
    color: white;
    font-size: 14px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-right: 5px;
}

input[type="submit"]:hover,
input[type="reset"]:hover,
button:hover {
    background-color: #0056b3;
}

</style>
</head>
<body>
<%
  Date today = new Date(); // 현재 날짜와 시간 객체 생성
  SimpleDateFormat yearFormat = new SimpleDateFormat("yyyy"); // 년도 형식 지정
  String year = yearFormat.format(today); // 년도만 추출
  int intyear = Integer.parseInt(year);
%>
	
<%
	String loginerr = request.getParameter("loginerr");
	if (loginerr != null) out.print("비밀번호가 일치하지 않습니다.");
%>

	<form action="Join_proc.jsp" method="post" enctype="multipart/form-data">
		<h2>회 원 가 입</h2>
		<table>
		<tr>
		<td>아이디</td>
		<td><input type="text" name="uid" id="uid" onkeyup="id_check()"></td>
		</tr>
		
		<tr>
		<td colspan="2" style="text-align: center;"><span id="id_msg"></span></td>
		</tr>
		
		<tr>
		<td>비밀번호</td>
		<td><input type="password" name="upass1" id="upass1" onkeyup="pass_check()"></td>
		</tr>
		
		<tr>
		<td>비밀번호 확인</td>
		<td><input type="password" name="upass2" id="upass2" onkeyup="pass_check()"></td>
		</tr>
		
		<tr>
		<td colspan="2" style="text-align: center;"><span id="pass_msg"></span></td>
		</tr>
		
		<tr>
		<td>이름</td>
		<td><input type="text" name="uname"></td>
		</tr>
		
		<tr>
		<td>성별</td>
		<td><input type="radio" name="sex" value="M" checked="checked">남자
			<input type="radio" name="sex" value="F">여자</td>
		</tr>
		
		<tr>
		<td>생일</td>
		<td>
		<select name="yyyy">
		<% 
			for (int i=1950; i<=intyear; i++) {
		%>
				<option value="<%= i %>"><%= i %></option>
		<%
			}
		%>
		</select><br><br>
		
		<select name="mm">
		<% 
			for (int i=1; i<=12; i++) {
		%>
				<option value="<%= i %>">
										<% if (i < 10) { %>
											0<%= i %> 월
										<% } else { %>
											<%= i %> 월
										<% } %>
				</option>
		<%
			}
		%>
		</select><br><br>
		
		<select name="dd">
		<% 
			for (int i=1; i<=31; i++) {
		%>
				<option value="<%= i %>">
										<% if (i < 10) { %>
											0<%= i %>
										<% } else { %>
											<%= i %>
										<% } %>
				</option>
		<%
			}
		%>
		</select>
		</td>
		</tr>
		
		<tr>
		<td>취미</td>
		<td><input type="checkbox" name="hobby" value="football">축구
			<input type="checkbox" name="hobby" value="basketball">농구
			<input type="checkbox" name="hobby" value="Volleyball">배구</td>
		</tr>
		
		<tr>
		<td>사진</td>
		<td><input type="file" name="upfile" accept=".gif, .jpg, .png"></td>
		</tr>

		<tr>
		<td colspan="2" style="text-align: center;"><input type="submit" value="가입">
			<input type="reset" value="리셋">
		<button type="button" onclick="history.back()">취소</button>
		</td>
		</tr>
		
		</table>
	</form>
</body>

<script type="text/javascript">
function submit_check() {
	var uid = document.getElementById("uid");
	   if(uid.value.trim().length < 4 ){
	      alert('아이디가 너무 짧습니다.');
	      uid.focus();
	      return;
	}
	   document.join_form.submit();
}

function id_check()
{
   var uid = $('#uid').val();
   
   if(uid.length < 4)
   {
      return;
   }
   
   $.ajax({
      url : "./Join_check.jsp",
      type : "post",
      data : {uid: uid},
      dataType : 'html',
      success : function(result){
         
         var data = result.trim();
         
         if(data == "Y")
         {
            var msg = "<font color='blue'>아이디 사용 가능</font>";
            $('#id_msg').html(msg);
         }
         else
         {
            var msg = "<font color='red'>아이디 사용 불가</font>";
            $('#id_msg').html(msg);
         }
      },
      error: function (request, status, error) {
           console.log("code: " + request.status)
           console.log("message: " + request.responseText)
           console.log("error: " + error);
       }
   });
   return;
}

function pass_check() {
	var pass1 = $('#upass1').val();
	var pass2 = $('#upass2').val();
	
	if(pass1.length < 4 || pass2.length < 4)
	   {
			return;
	   }
	
	if (pass1 == pass2) {
		$('#pass_msg').html("<font color='blue'>비밀번호 확인됨</font>");
	}else {
		$('#pass_msg').html("<font color='red'>비밀번호 서로 다름</font>");
	}
}
</script>


</html>