<%@page import="java.net.URLEncoder"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    
<%


int totalp = 0;
int scale = 10; //페이지 당 게시물---------------------------------------------------------------
int offset = 0;
double count =0;
String _page = request.getParameter("_page");
if (_page == null) _page = "1";
int now_page = Integer.parseInt(_page); //현재 페이지
offset = (now_page-1)*scale ;

try {
	conn = DB.getConnection();
	st = conn.createStatement();
	rs = st.executeQuery(sql);
	rs.next();
	count = rs.getDouble("cnt");
	double countt = Math.ceil(count/scale);
	totalp = (int)countt;
	count = rs.getInt("cnt");
	double dcount = count;
   	int ccount = (int)count;
	
	}catch (Exception e) {
		out.println(sql);
	}

int page_scale = 10; //보여지는 페이지의 수 ------------------------------------------------------
int page_group = (int)Math.ceil((double)totalp/page_scale);
int page_group_start = ((now_page-1)/page_scale)*page_scale+1;
int page_group_end = page_group_start+page_scale-1;
if (page_group_end>totalp) {
	page_group_end=totalp;
}

try {
	conn = DB.getConnection();
	
	if(word != null && !word.equals("")) {
		sql = " SELECT count(*) as cnt from board where "+key+" like '%"+word+"%'";
	}else {
		sql = " SELECT count(*) as cnt from board ";
	}
	
}catch (Exception e) {
	System.out.println(sql);
}

	st = conn.createStatement();
   	rs = st.executeQuery(sql);
   	rs.next();
   	
   	
    
    
%>