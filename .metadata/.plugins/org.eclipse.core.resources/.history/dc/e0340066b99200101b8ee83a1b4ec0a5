<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ page import="java.sql.*" %>
<%@ page import="lib.DB" %>
<%
String login_id = "";
login_id = (String)session.getAttribute("ss_check");
String login_idx = "";
String login_name = "";
String login_upfile = "";
int login_rank = -1;

if(login_id == null || login_id.equals("") || login_id.equals("null")) {
}else {
	String sqll = null;
	Connection connl =null;
	PreparedStatement psl = null;
	ResultSet rsl = null;
	
	try {
		
		connl = DB.getConnection();
		
		sqll = "SELECT * FROM member WHERE uid=?";
		psl = connl.prepareStatement(sqll);
		psl.setString(1, login_id);
		
		rsl = psl.executeQuery();
		rsl.next();
		
		login_idx = rsl.getString("idx");
		login_name = rsl.getString("name");
		login_upfile = rsl.getString("upfile");
		login_rank = rsl.getInt("member_rank");
		
	}catch (Exception e) {
		out.println(e.toString());
		out.println(sqll);
	}
}
%>

<style>
.board-header {
    background-color: #f8f9fa;
    border-bottom: 2px solid #e9ecef;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    margin: 0 auto;
}

.board-header h1 {
    font-size: 28px;
    color: #343a40;
    margin: 0;
    font-weight: bold;
    text-align: left;
}

.board-header h1 a {
	font-size: 28px;
    color: #343a40;
    margin: 0;
    font-weight: bold;
    text-decoration: none;
}

.board-header nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    gap: 50px;
    text-align: right;
}

.board-header nav li a {
    text-decoration: none;
    color: #495057;
    font-size: 16px;
    font-weight: 500;
    transition: color 0.3s ease;
}

.board-header nav li a:hover {
    color: #007bff;
}

img {
width: 20px;
object-fit: contain;
}


</style>
<% if(login_id == null || login_id.equals("") || login_id.equals("null")) { %>
<header class="board-header">
    <h1><a href="../board_proc/main_proc.jsp">게 시 판</a></h1>
    <nav>
        <ul>
            <li>로그인 ID : 비로그인</li>
            <li><a href="#">@</a></li>
            <li><a href="#">@</a></li>
            <li><a href="../member/Login.jsp">로그인 하기</a></li>
        </ul>
    </nav>
</header>
<% }else { %>
<header class="board-header">
    <h1><a href="../board_proc/main_proc.jsp">게 시 판</a></h1>
    <nav>
        <ul>
            <li>로그인 ID : <%= login_name %></li>
            <% if (login_upfile == null || login_upfile.equals("")) { %>
            	<li> &nbsp; &nbsp; &nbsp; &nbsp; </li>
            <% }else { %>
            	<li><img alt="X" src="../member/Download.jsp?uid=<%= login_id %>"></li>
            <% } %>
            <li><a href="#">@</a></li>
            <li><a href="../member/Logout.jsp">로그아웃</a></li>
        </ul>
    </nav>
</header>
<% } %>
